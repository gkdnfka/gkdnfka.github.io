---
layout: post
title:  "2022학년도 2학기 인천대학교 현장실습 회고록 2부"
date:   2023-03-07 16:00:00 +0900
categories: University
---

## 목차

0. [머리글](../../06/22년도_하반기_인턴쉽_1부/#0-머리글)
1. [프로그램 개요](../../06/22년도_하반기_인턴쉽_1부/#1-프로그램-개요)
2. [회사 및 업무 소개](../../06/22년도_하반기_인턴쉽_1부/#2-회사-및-업무-소개)
3. [입사 과정](../../06/22년도_하반기_인턴쉽_1부/#3-입사-과정)
4. [근무 일지](#4-근무-일지)
5. [고충 사항](#5-고충-사항)
6. [마무리](#6-마무리)

## 4. 근무 일지
앞의 업무 소개에서 간단히 언급한대로 업무의 대부분은 AI 모델링/데이터 전처리 업무 위주로 구성되었다. 이 단락에서는 기간의 경과에 따라 어떤 업무를 했는지 어떤 생활을 했는지 월별로 간단하게 풀어가고자 한다.
### 9월
근무는 9월 1일에(2학기 개강일) 바로 시작했다. 첫 사회생활이어서 엄청 긴장했다. 너무 긴장해서 생긴 해프닝이 있었다.

```
직원 분: 안녕하세요 ^^. 나이가 어떻게 되세요?
본인 : 아 만으로 25입니다. 한국나이로 26입니다.
```

이 짧은 대화로 인해 한 분은 나를 외국에서 살다 오신줄 알았다고 했다.  
보통 나이를 말할때 26이라 하지 굳이 만나이를 들이 밀지는 않으니...  
나중에 엄청 긴장해서 그런거라고 해명은 했는데 진짜 다시 생각해도 왜저러나 싶은 대화다.  

그만큼 당시 긴장을 너무 많이 했었다.  
뿐만 아니라 엄청나게 말도 절고, 그 날 인생 처음먹어본 마라탕이 무슨 맛인지도 생각이 안난다.  

간단하게 서류처리, 사내 메신저, 메일, 부서 github 등록 등의 절차를 끝내고 입사 당일이 목요일이라서 목/금은 기존 진행되었던 데이터 확인 및 추가 데이터 수집을 진행했다. 다행인게 이 업무는 학교 강의에 나왔던 내용 베이스라 큰 문제 없이 하고 끝났다.  

그 다음주 부터 본격적으로 업무 투입인데 월요일은 개인 사정으로 며칠 늦게 입사하신 인턴 동기 분을 포함해 3명에서 간단한 회사 OT를 받고 실근무를 시작했다.  

같은 부서 인턴 동기와 함께 CTO님(왜인지 모르겠지만 어쩌다 보니 직속이 CTO님이 되어버렸다)에게 받은 업무는 얼굴 인식 관련 프로젝트였다. 업무 설명을 들으면서도 '어.. 이게 맞나?' 싶을 정도로 인턴 두명이 맡기에는 큰 프로젝트라 생각했다. 업무 전달 이후 동기 분과 함께 "이거 어떻게 하죠"하면서 머리를 싸맸다...  

우선 이전에 해당 업무를 진행하시던 전임자 분께 수집된 데이터를 전달 받고 어떤 방향으로 접근했고 바탕이 된 방법론에 관해 찾아봤다. 방법론에 관련해서는 사이트 포트폴리오 칸에 목록화를 했으니 설명은 넘어간다. 여하튼 모든 개념이 처음 접한 개념이라 어리둥절하며 진짜 한 주간 관련 논문 리뷰글 살펴보고 얼굴 인식만 뚫어져라 쳐다봤다.  

데이터도 필요했기에 자연스레 데이터 수집기도 구성해서 돌려놓고, 남은 시간은 관련 라이브러리 찾아서 돌려보고 성능 평가도 해보고 하는 일정이었다. 그렇게 하나에만 2주정도 들여가며 인식기가 같은 사람을 판단하는데 정확도가 90%? 언저리로 구성되며 우선 종료했다.(우선 종료라는건 다음에 또 등장한다는 복선...)  

어떻게든 끝냈다 싶었던 찰나 다음 업무는 동기분이랑 나누어져 각자 진행했다. 당시 부서가 연간 데이터바우처 사업 진행 마무리 단계라 태스크가 쉴틈없이 몰아쳐 단독으로 빠질 수 밖에 없었다. 이번에 진행하게 된 영역은 이미지 분류였다.  
단순 이진분류라 할만하지 않을까? 싶었는데 문제는 <b><i>유해한</i></b> 이미지라는 거였다. 막 이쁘장한 누님이 세상에 자유를 외치고 있다거나 몸의 혈액이 과할 정도로 노출된다거나 등의 이미지를 하루종일 쳐다봐야했다. 데이터가 데이터인 만큼 업무시간 내내 항목 분류를 하는데 진짜 죽을 맛이었다. 뇌랑 눈이 썩어가는 느낌을 제대로 느꼈다.  

유해 이미지도 유해 이미지인데, 문제는 정상이미지에도 있었다.  
몇가지 문제점을 꼽자면, 
* 분류가 하나로 통일이 안됨.
  - 유해이미지는 어차피 딱 보면 유해하다 싶다. Nude라던가 피가 나온다던가 등의 분류가 명확하다.
  - 그런데 정상 이미지는 가전제품도 정상, 동물도 정상, 인물도 정상, 풍경도 정상이다. 이렇게 각 분류가 너무 많아 문제가 생겼다.
* 통일이 안된다? -> 이미지 수집 범위가 방대함
  - 이 문제를 인지하기 전에는 이전 태스크에서 썼던 인물이미지만 썼는데, 이러니까 얘가 가전제품같은거를 가져다 놓으면 유해이미지로 판단했다.
  - 결국 생각나는대로 카테고리 적고(ex. 가전제품, 휴대폰, 풍경, 수영복 등) 카테고리당 x장 해서 수집했다.

이미지 수집이야 어떻게 처리했다 치는데 분류 통일이 가장 큰 문제였다. 기존 분류문제로서 문제 해결을 하려하니 얘가 이상하게 받아버리니까...  

그래서 머리를 짜내 해결법을 생각해낸게 다음과 같았다.  

```
1. 분류(classfication)의 항목을 2개로 극단적으로 줄인다.
 - 당시 사용하고 있던게 ImageNet 분류를 기반으로 한 ResNet으로 분류를 진행했다. 
 - 근데 ImageNet은 100개 분류로 아웃풋을 뽑아낸다. 근데 우리는 단순 2분류(유해여부(O/X))만 필요하다. 
 - 그래서 Network자체를 finetuning해 output layer의 결과 개수를 2로 줄여 재 학습을 진행했다.

2. DL 분류가 아니라 ML clustering으로 개선.
 - 어차피 그냥 유해한 것만 골라내면 되니까에서 시작된 아이디어.
 - 유해한 이미지로 군집을 만들고 그 안에 포함되지 않은 이미지는 모두 정상 이미지로 판단하는 방법.
 - KNN, K-means, random forest 등의 방법으로 군집 구성.
 - 기존 사용하던 pytorch가 아니라 scikit-learn으로 진행해 tensor형태 맞추느라 시행착오 발생.

3. Anomaly detection 방법 사용(1 + 2)
 - CTO 님한테 진행상황 보고 이후 나온 방법론
 - 원래는 산업용 물품 이상 발생 확인, 변이 세포 확인등에 사용되는 방법론. 
 - 어차피 정상인 이미지를 제외시키면 되니까 이거 한번 해보세요~
 - 자료찾다가 포스팅 하나에서 feature Matching 방식을 보고 진행했다.

```
###### (참고 포스팅: <https://ffighting.tistory.com/130>)

결국 모든방법에 대해 F1 Score를 정리하고 보고하면서 정확도 99%짜리 결과물을 만들고 끝냈다.  
(인턴 끝날때 즈음 뭔가 잘못했단걸 알아낸건 안비밀)

다음 업무는 내 인턴생활을 가장 괴롭힌 업무가 되시겠다...  
OCR(Optical Character Recognition)관련 태스크다.  
왜 괴롭혔는가에 대해 뒤에서 설명하겠지만 간단하게 목록화하면,  

1. 기존 vision이야 학교에서 이미지 분류를 해봐서 크게 문제가 없었으나, 글자인식은 단순 vision이 아니라 NLP에도 발을 걸쳐서 머리가 터질 것 같은 예감
2. 이 task와 동시에 주어진게 사용하는 기술에 대한 논문 리뷰업무가 같이 왔다.  
 -> 학교생활중에도 논문을 읽어본 경험 없음. 게다가 발표? 어우....  

그래서 저 업무 받자마자 눈 돌아가기 직전이었다.  
그나마 저 업무를 받은 시점이 9월 말이기도 했고 오래 끌고갈 업무라해서 남은 9월 동안은 직접적으로 손대기보다 맛만 보고 끝냈다.

### 10월
~~사족: 10월에 접어들고 마자 학교 축제가 있었는데... 왜 금요일에 안했을까... 나도 가고싶었다... 축하공연도 보고...~~

10월 초 회사는 이전을 준비하고 있었다. 강남이라 출퇴근 빨라서 좋았거늘 이동한 곳은 저어어어기 서울 북동쪽 성수였다.  
그래서 이사 전 주 금요일에는 업무자체는 빨리 끝났지만 짐정리에 시간을 더 쏟았다. 그나마 개인짐이 얼마 없어서 포장이 쉬워서 다행.

그래도 이전한 회사 장소는 높은 곳이라 탁 트여있기도 했고 한강뷰여서 경치는 좋았다. 물론 쉴틈없이 쏟아지는 채광을 감당하기가 초반에는 힘들어서 문제였지만..  
한강이라는 이점을 살려 점심시간에 샌드위치 하나 사들고 밥을 먹는 나름의 <b>낭만</b>을 실천하기도 했다.  

업무는 지난 달에 시작한 OCR의 연장선. 한달내내 논문보고 번역하고 정리하고 코드 훑고 결과 분석하고 했다.  

단순히 모델을 배포하는 것에서 끝나는게 아니고 이걸 API화 시켜서 클라이언트 단에서 호출해 사용가능하게 만드는 것 까지가 내가 해야할 업무였다.  
여기서 처음 해본 것이 Swagger UI를 통한 배포였다.  
몇가지 장점이 있었는데,

1. 만들기 쉽다: python flask기반이라 예제도 많고 그냥 띠리릭하면 웹페이지 완성!
2. 결과물을 바로 보여준다: 예시로 열심히 하는 [lostark의 API 페이지](https://developer-lostark.game.onstove.com/getting-started#API-CHARACTERS)와 비슷한 형태로 구성되는데 요청을 페이지에서 날리면 바로 json 형식으로 가공된 결과를 보여준다. 

이래서 몇가지 오류만 잡아주니까 배포가 가능한 상태로 가공이 됐다.  
어차피 결과물 데이터의 추가 가공은 우리 몫이 아니니까...

이외에도 간단한 [회식자리](https://blog.naver.com/PostView.naver?blogId=coconutsilo&logNo=222897385660&categoryNo=1&parentCategoryNo=&from=thumbnailList)나 이전 후 정리, OCR 업무 진행 경과 보고등의 업무로 큰 업무의 추가 없이 끝났다.  

### 11월
어느새 현장실습의 50%를 해냈다. 10월 말에는 사랑니를 뽑느라 일상생활이 날아갔다. 그렇게 시작된 11월은 이전 작업물에 대한 추가 유지 보수, 리팩토링, 준비하던 논문 리뷰 발표로 이뤄졌다. 

물론 이외에도 ML로 진행한 업무가 하나 있지만, 단순하게 얼굴에서 보이는 feature들로 tensor를 구성해 scikit-learn ML 모델에 던지고 결과만 보는거라 크게 어려움은 없었다. 

진행하던 OCR 프로젝트가 꽤 큰 하드웨어 스펙을 요구했기에 사내 워크스테이션을 통한 Multi-GPU Deep Learning 환경 구축도 시도해봤다. 그러나 본 워크스테이션이 windows 환경이라 기존 사용하던 라이브러리의 Distributed environment 코드가 리눅스만 지원하는 터라 결국 성공은 못했다. 

주로 한 업무는 역시 유지보수, 리팩토링 업무였다.  
유지보수 작업의 경우 앞에서 진행한 swagger를 통한 API 화 또한 기존 작업물에 추가해 배포작업까지 진행했다.  
AWS EC2 서버에 올린 후 외부에서 접속까지 가능하도록 배포했다.  
이때 처음으로 Elastic IP 세팅도 처음 접해봤다. 

여기에 기존 얼굴인식기에서 사용된 face detection/alignment 기능의 모듈화를 통한 분리작업도 진행했다.  
동시에 코드 리팩토링도 같이 진행했는데, 이때 나름의 원칙 몇가지를 가지고 진행했다.
```
1. 같거나 비슷한 기능의 메소드는 통합작업을 거친다.
 * 코드를 둘러보다보니 비슷한 기능을 가진 코드가 여기저기 흩어져 있었다.  
 예를 들면 이미지 이름의 형식이 수집된 일자나 수집자에 따라 중구난방으로 흩어져 있었는데  
 그 이름의 형식에 따라 이미지 리딩 코드가 따로 짜여져 있는 경우가 있었다.  
 이 경우 이름에 상관없이 이미지 리딩 과정은 통일 되기에 한 함수로 묶고, 이미지 폴더를 매개변수로서 받아와 처리하는 쪽이 직관적으로 생각된다.

2. 가독성 높이기.
 * 사실 4개월 짜리 현장실습생이기에 내가 회사를 나오면 코드는 어쩔 수 없는 레거시코드가 된다.  
 이후에도 다른사람들이 알아보기 편하도록 가독성을 높이도록 변수명과 함수명을 다 뜯어 고쳤다.

3. 메소드의 독립성 구성하기.
 * 기능을 모듈화하면서 많이 고민한 부분인데, 각 메소드들이 어떻게 하면 독립적으로 돌아갈 수 있을까를 정말 많이 고민했다.  
 이미지 리딩의 경우 단순히 이 프로젝트 뿐만 아니라 vision 인식 어디에서나 사용될 가능성이 높기에  
 여기에만 종속되는 메소드로 만들게 아니라 그냥 사용되는 라이브러리를 import하고 코드만 그대로 가져다 붙이면 돌아가도록 만드는데 집중했다.
```

아마 당시에는 더 많은 고민을 했겠지만, 지금와서 생각나는 가장 큰 요점은 저 3가지이다.  
아무래도 처음으로 리팩토링을 본격적으로 진행하다 보니 이게 맞나? 싶어도 그냥 밀고 나간 부분이 있다.  

그리고 지난달 내내 나를 괴롭힌 부서내 논문 리뷰 발표도 월말즈음 진행됐다. CTO님을 포함해 10명 가량 앞에서 진행했다.  
그때 발표했던 PPT의 경우 어찌됐던 사내에서 업무시간 중에 작성한 생산물이라 규정때문에 가져오진 못했지만,  
약 <b>40장</b>에 달하는 양이었고 발표시간은 30분 언저리가 소요됐다.  
제작하면서 평소 논문을 자주 읽는 주변 지인한테도 도움받는 경우도 있었다.  
나름 알아야할 배경지식에 대한 내용도 쓰고 했지만 정작 CTO님의 질문에 제대로 답변을 못한 부분이 있어 조금 아쉬웠다.  
이게 내가 평소 관심있어하던 분야면 모르겠지만 업무로 인해 시작하고 워낙에 복잡한 개념이 많이 포함되며 발표하면서도 머리가 핑핑 돌았다.  
당시 리뷰했던 논문은 [PGNet](https://arxiv.org/pdf/2104.05458.pdf)논문 이었는데 내용 자체는 OCR을 위한 DL Network 구축 방법론과 실험결과에 관한 내용이다.  
하면서 다행이었던건 양이 여타 논문보다 절대적인 양이 적었다는 점.  

###### 여담으로 끝나고 CTO님: 앞으로 논문 발표는 이 정도로 하셔야합니다.  
~~(뭐지 만족하셨다는 건가 내가 최소치라는건가...)~~

그리고 1박2일간의 회사 워크샵이 진행됐다.  
내용은 간단한 성관련 범죄 예방 강의, 회사의 비전, 사업 계획등의 포괄적인 내용을 듣고 저녁에는 밥먹고 드링킹하고 게임하고...  
~~광란 그 자체, 한분의 희생이 이뤄낸 꿀잼 저녁타임~~  
이전달에 진행한 체육대회도 그렇고 워크샵도 그렇고 회사에 재밌고 좋은 분이 많다는 거를 느낀 시간이었다.

돌아와서는 현장실습 마무리 업무 [AGC](https://www.aigrandchallenge.or.kr/)가 시작되었다...

### 12월

12월은 팀 단위 Challenge 출전이 주 업무였다. 참가한 challenge의 주 목표는 정책 결정 지원 AI였다.  
수없이 많은 자료중 특정 주제에 관한 자료를 찾아주는게 주 역할이다.  
처음 챌린지 문제지를 받자마자 든 생각.  
이게 되나..? 싶은 생각이 들었다. 기본적으로 NLP를 요구하는 과제기도 했고, 중반부는 이미지(그래프)인식, 후반부는 멀티모달에 구문 의미해석까지... 진짜 앞이 안보였다.  

또 제출은 Docker로 build하고 환경자체를 이식해야해서 이것도 처음 접해본 입장에서는 눈이 돌아갔다.  
거의 3주간 계속 이거만 매달리다 보니까 Bert와 GPT 차이도 알았고,  
SQuAD도 많이 접하게 됐다.  
당시 정규직 연구원 분들은 다른 작업때문에 참가하지 못하시고  
인턴 3명에서 해당 챌린지를 준비했는데, 뭐가 되긴했다?  
transformer를 간단하게 구성할 수 있는 라이브러리가 있어 우격다짐으로  
다 밀어넣으면서 어떻게든 마무리 했다.  

이후는 역시 대회 진행과정에서 접근한 방법등을 설명하는 간단한 설명회를 마지막으로 대회는 마무리 되었다.  

남은 현장실습 기간에는 데이터 가공업무 보조나 기존 작업 내용물을  
연구원 분들한테 전달하는 업무를 주로 진행했다.  
코드 훑으면서 메소드 사용처나 어떤 순서로 프로그램이 진행되는지 등  
개괄적인 내용을 설명하고 어디서 쓰였는지를 구체적으로 설명했다.  

기존 진행하던 OCR을 어떤 방향으로 발전시킬지에 대한 간략한 내용정리와  
[AIHub](https://aihub.or.kr/)의 데이터셋을 활용해 OCR 학습 틀을 짜고 모든 업무가 완료됐다.  

## 5. 고충 사항
4개월 꽉꽉 채워가며 근무를 하며 이랬으면 더 좋지 않았을까? 하는 점을 적어보려한다. 아무래도 첫 사회생활이기도 해서 나름의 환상이 있음을 고려해줬으면 한다.  

<b>1. 사수나 멘토등의 직접적으로 질의가 가능한 역할의 부재.</b>  
 가장 아쉬웠던 부분인데, 기술적으로 서포팅을 받을 존재가 없었다 생각된다.   
 일지에도 썼듯이 한 프로젝트를 단독으로 진행하거나 인턴끼리, 연구원 분들과 함께하더라도 아예 분리된 영역을 진행하다보니 어려움이 많았다.  
 거의 직속 느낌으로 CTO님께 보고 드리고 방향성을 계속 지시 받았지만, 자리가 자리이다 보니 당장 내 개인 업무에만 시간을 투자하실수는 없는 상황이었다.  
 그러다 보니 업무를 진행하며 뭔가 배우면서 한다기 보다 주먹구구식으로 그때 그때마다 구멍을 메워가며 진행한것 같은 느낌으로 업무를 진행했다.

<b>2. 업무 솔로플레잉</b>  
 1.의 연장선상에 있는 부분인데 앞에서 언급했듯 혼자서 업무를 진행하는 일이 잦았다.  
 현장실습을 선택한 이유는 실제 업무 프로세스가 어떻게 구성되고, 협업을 어떻게 하는지를 배우고 싶어서 선택했다.  
 그러나, 막상 본 근무에서는 혼자하거나 다른부분을 맡아 연관성이 없는 경우가 태반이었다.  
 그나마 챌린지의 경우 여러 아이디어를 공유하며 나름의 협업을 진행했지만 그마저도 결과가 만족스럽지는 못했다.  

<b>3. 희망 진로와는 다른 방향의 업무수행</b>    
 이 부분은 본인 잘못도 포함이라 써야되나 싶긴하지만 업무 진행 당시에 많은 고민을 했던 부분이라 작성한다.  
 처음 면접때 얘기했던 것처럼 데이터 엔지니어링 커리어에 도움이 될거라 생각하고 신청한 현장실습이었지만 정작 업무의 대부분은 AI 엔지니어링에 가까웠다.  
 물론 진짜 하드하게 수식을 짜거나 Neural Network를 0부터 Layer를 쌓는 업무는 아니었으나, 처음 생각과는 달라서 당황했다.  
 그나마 데이터 전처리나 라벨링하면서 이런식으로 분류를 해야하구나, 이런 형태의 데이터를 원하는구나라고 막연하게 깨달은 점은 있다.


## 6. 마무리
1부를 약 1개월에 걸쳐 작성하고 2부는 4일정도만에 작성끝낸것 같다. 원래는 2월 안에 다 마무리 하려고 한건데 너무 느려...  
현장실습 종료 후 2개월이 지났는데 그래도 현장실습으로 작년 2학기는 열심히 살았다.  
매일 같이 출근하면서 학교생활이 왜 좋은지도 몸으로 느꼈다.  
학교가 최고야~~~~  
지금은 취준생 타이틀달고 호롤롤로 놀고있지만 다시 일하면 이때 경험 살려서 조금은 덜 긴장하며 일하고 싶다.  
자기소개서에 적을 한줄 이상의 경험을 했다 생각하고 싶다.  
평소 자존감이 바닥인 나에게 4개월간의 실습에서 항상 개발 잘한다고 말해준 연구원 분들과 마지막에 출장으로 인해 직접 뵙지는 못했지만 방향성 조언 해주신 CTO님께 감사를 표하고 싶다.  
다음은 대학 회고록을 적지 않을까..?